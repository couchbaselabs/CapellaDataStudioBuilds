"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2591],{6272:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var r=s(5893),n=s(1151);const o={},i="Restore",a={id:"Backup-Center/restore",title:"Restore",description:"Restoring a backup to a database",source:"@site/docs/Backup-Center/restore.md",sourceDirName:"Backup-Center",slug:"/Backup-Center/restore",permalink:"/docs/Backup-Center/restore",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Backup Center",permalink:"/docs/Backup-Center/backup-center-ui"},next:{title:"Workbenches",permalink:"/docs/category/workbenches"}},l={},c=[{value:"Restoring jungleville to Demo",id:"restoring-jungleville-to-demo",level:2},{value:"Restore ToolBar",id:"restore-toolbar",level:3},{value:"Restore Form",id:"restore-form",level:2},{value:"Exclude Collections",id:"exclude-collections",level:3},{value:"Filter Keys",id:"filter-keys",level:3},{value:"Filter Values",id:"filter-values",level:3},{value:"Force Update",id:"force-update",level:3},{value:"Remove Collections",id:"remove-collections",level:3},{value:"Restore Process",id:"restore-process",level:2},{value:"Notification",id:"notification",level:3},{value:"Logs",id:"logs",level:3},{value:"Databases",id:"databases",level:3},{value:"Restore travel-sample to the same Demo bucket",id:"restore-travel-sample-to-the-same-demo-bucket",level:2},{value:"Restore Form",id:"restore-form-1",level:2},{value:"Notification",id:"notification-1",level:3},{value:"Logs",id:"logs-1",level:3},{value:"Databases",id:"databases-1",level:3}];function d(e){const t={admonition:"admonition",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,n.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"restore",children:"Restore"}),"\n",(0,r.jsx)(t.p,{children:"Restoring a backup to a database"}),"\n",(0,r.jsx)(t.h2,{id:"restoring-jungleville-to-demo",children:"Restoring jungleville to Demo"}),"\n",(0,r.jsxs)(t.p,{children:["This backup was taken some time back on a cluster which has actually been deleted",(0,r.jsx)("br",{}),"\nLet's restore this on our ",(0,r.jsx)(t.em,{children:"Active Connection"}),(0,r.jsx)("br",{}),"\nThe ",(0,r.jsx)(t.em,{children:"Active Database"})," is ",(0,r.jsx)(t.strong,{children:"Demo"}),(0,r.jsx)("br",{}),". This is empty.\nThe ",(0,r.jsx)(t.em,{children:"Active Scope"})," id=s ",(0,r.jsx)(t.strong,{children:"\\_default"}),". Restore will create and overwrite scopes as required",(0,r.jsx)("br",{})]}),"\n",(0,r.jsx)(t.h3,{id:"restore-toolbar",children:"Restore ToolBar"}),"\n",(0,r.jsx)("img",{src:"/img/backup-center/backup-center-toolbar.png",width:"400",alt:"backup-center-toolbar"}),"\n",(0,r.jsx)(t.h2,{id:"restore-form",children:"Restore Form"}),"\n",(0,r.jsx)("img",{src:"/img/backup-center/backup-center-restore-form.png",width:"400",alt:"backup-center-restore-form"}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsxs)(t.p,{children:["Note that while the tool does use ",(0,r.jsx)(t.strong,{children:"cbbackupmanager"}),", it does not support ",(0,r.jsx)(t.em,{children:"all"})," the restore options."]})}),"\n",(0,r.jsx)(t.h3,{id:"exclude-collections",children:"Exclude Collections"}),"\n",(0,r.jsxs)(t.p,{children:["Overrides the repository configuration to skip restoring the data specified in the ",(0,r.jsx)(t.em,{children:"collection_string_list"}),". This flag takes a comma separated list of collection strings. Note that excluding data at the scope/collection level is an Enterprise Edition feature."]}),"\n",(0,r.jsx)(t.h3,{id:"filter-keys",children:"Filter Keys"}),"\n",(0,r.jsx)(t.p,{children:"Only restore data where the key matches a particular regular expression. The regular expressions provided must follow RE2 syntax."}),"\n",(0,r.jsx)(t.h3,{id:"filter-values",children:"Filter Values"}),"\n",(0,r.jsx)(t.p,{children:"Only restore data where the value matches a particular regular expression. The regular expressions provided must follow RE2 syntax."}),"\n",(0,r.jsx)(t.h3,{id:"force-update",children:"Force Update"}),"\n",(0,r.jsx)(t.p,{children:"Forces data in the Couchbase cluster to be overwritten even if the data in the cluster is newer. By default updates are not forced and all updates use Couchbase\u2019s conflict resolution mechanism to ensure that if newer data exists on the cluster that is not overwritten by older restore data."}),"\n",(0,r.jsx)(t.h3,{id:"remove-collections",children:"Remove Collections"}),"\n",(0,r.jsx)(t.p,{children:"Automatically delete scopes/collections which are known to be deleted in the backup."}),"\n",(0,r.jsx)(t.h2,{id:"restore-process",children:"Restore Process"}),"\n",(0,r.jsx)(t.h3,{id:"notification",children:"Notification"}),"\n",(0,r.jsxs)(t.p,{children:["The Bell Icon on the ",(0,r.jsx)(t.strong,{children:"AppBar"})," shows the beginning and end of the restore process\n",(0,r.jsx)(t.img,{alt:"backup-center-restore-notification",src:s(3998).Z+"",width:"3072",height:"284"})]}),"\n",(0,r.jsx)(t.h3,{id:"logs",children:"Logs"}),"\n",(0,r.jsxs)(t.p,{children:["The Logs show the details of the Restore\n",(0,r.jsx)(t.img,{alt:"backup-center-restore-logs",src:s(4048).Z+"",width:"3072",height:"1720"})]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Notice that even the ",(0,r.jsx)(t.strong,{children:"indexes"})," have been automatically rebuilt"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"databases",children:"Databases"}),"\n",(0,r.jsxs)(t.p,{children:["You might see that the ",(0,r.jsx)(t.strong,{children:"Databases Scope"})," does not reflect the imported scopes.",(0,r.jsx)("br",{}),"\nYou will have to ",(0,r.jsx)(t.strong,{children:"Refresh"})," the Scopes. Once done, you will see:\n",(0,r.jsx)(t.img,{alt:"backup-center-restore-databases",src:s(4958).Z+"",width:"3072",height:"1722"})]}),"\n",(0,r.jsx)(t.h2,{id:"restore-travel-sample-to-the-same-demo-bucket",children:"Restore travel-sample to the same Demo bucket"}),"\n",(0,r.jsxs)(t.p,{children:["Let's see how we can restore the backup taken from travel-sample bucket from a different cluster to the same demo bucket.",(0,r.jsx)("br",{})]}),"\n",(0,r.jsx)(t.h2,{id:"restore-form-1",children:"Restore Form"}),"\n",(0,r.jsx)("img",{src:"/img/backup-center/backup-center-restore-form-travel.png",width:"400",alt:"backup-center-restore-form-travel"}),"\n",(0,r.jsx)(t.h3,{id:"notification-1",children:"Notification"}),"\n",(0,r.jsxs)(t.p,{children:["The Bell Icon on the ",(0,r.jsx)(t.strong,{children:"AppBar"})," shows the beginning and end of the restore process"]}),"\n",(0,r.jsx)("img",{src:"/img/backup-center/backup-center-restore-notification-travel.png",width:"400",alt:"backup-center-restore-notification-travel"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Notice the restore from travel-sample has been added"}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"logs-1",children:"Logs"}),"\n",(0,r.jsxs)(t.p,{children:["The Logs show the details of the Restore\n",(0,r.jsx)(t.img,{alt:"backup-center-restore-logs-travel",src:s(4181).Z+"",width:"3072",height:"1720"})]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Notice the restore from travel-sample has been added"}),"\n",(0,r.jsxs)(t.li,{children:["Notice that even the ",(0,r.jsx)(t.strong,{children:"indexes"})," have been automatically rebuilt"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"databases-1",children:"Databases"}),"\n",(0,r.jsxs)(t.p,{children:["You might see that the ",(0,r.jsx)(t.strong,{children:"Databases Scope"})," does not reflect the imported scopes.",(0,r.jsx)("br",{}),"\nYou will have to ",(0,r.jsx)(t.strong,{children:"Refresh"})," the Scopes. Once done, you will see:\n",(0,r.jsx)(t.img,{alt:"backup-center-restore-databases-travel",src:s(2308).Z+"",width:"3072",height:"1722"}),"\nOK, lets' examine this in detail: ",(0,r.jsx)("br",{})]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["The ",(0,r.jsx)(t.strong,{children:"Scopes and Collections"})," from ",(0,r.jsx)(t.em,{children:"travel-sample"})," have been added to the existing ",(0,r.jsx)(t.strong,{children:"Scopes and Collections"})," from ",(0,r.jsx)(t.em,{children:"jungleville"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["The documents from ",(0,r.jsx)(t.em,{children:"travel-sample"})," have been added to the ",(0,r.jsx)(t.em,{children:"default"})," collection which was empty.","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["If default was not empty, the docs from ",(0,r.jsx)(t.em,{children:"travel-sample"})," would have been an addition"]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},2308:(e,t,s)=>{s.d(t,{Z:()=>r});const r=s.p+"assets/images/backup-center-restore-database-travel-2d51c2f9e3fff81abc198c56a90a7bd3.png"},4958:(e,t,s)=>{s.d(t,{Z:()=>r});const r=s.p+"assets/images/backup-center-restore-database-15fd7dc1f7323409d8281ead81b2cd2f.png"},4181:(e,t,s)=>{s.d(t,{Z:()=>r});const r=s.p+"assets/images/backup-center-restore-logs-travel-b5f3ce99633389b76f129094149991e2.png"},4048:(e,t,s)=>{s.d(t,{Z:()=>r});const r=s.p+"assets/images/backup-center-restore-logs-345e469ae6d946016bf7983310455b9c.png"},3998:(e,t,s)=>{s.d(t,{Z:()=>r});const r=s.p+"assets/images/backup-center-restore-notification-d25d7a014d4131b6c522433830519c7b.png"},1151:(e,t,s)=>{s.d(t,{Z:()=>a,a:()=>i});var r=s(7294);const n={},o=r.createContext(n);function i(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);