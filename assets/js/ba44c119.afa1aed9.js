"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2963],{5223:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>h});var t=s(5893),i=s(1151);const r={sidebar_position:6,title:"Using Capella iQ"},a="Using Capella iQ",l={id:"Workbenches/useiq",title:"Using Capella iQ",description:"Lets see how to use AI to generate SQL++ Queries",source:"@site/docs/Workbenches/useiq.md",sourceDirName:"Workbenches",slug:"/Workbenches/useiq",permalink:"/docs/Workbenches/useiq",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,title:"Using Capella iQ"},sidebar:"tutorialSidebar",previous:{title:"Side Panel",permalink:"/docs/Workbenches/sidepanel"},next:{title:"Plugins",permalink:"/docs/Plugins"}},o={},h=[{value:"The Prompt Panel",id:"the-prompt-panel",level:2},{value:"Prompt ToolBar",id:"prompt-toolbar",level:3},{value:"The Chat Panel",id:"the-chat-panel",level:2},{value:"Chat ToolBar",id:"chat-toolbar",level:3},{value:"Chat Implementation",id:"chat-implementation",level:2},{value:"Excuting the Query",id:"excuting-the-query",level:2},{value:"Interesting Queries",id:"interesting-queries",level:2},{value:"iQ Replies",id:"iq-replies",level:3}];function c(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"using-capella-iq",children:"Using Capella iQ"}),"\n",(0,t.jsxs)(n.p,{children:["Lets see how to use AI to generate SQL++ Queries",(0,t.jsx)("br",{}),"\nFor this, we will use the ",(0,t.jsx)(n.strong,{children:"travel-sample"})," bucket and ",(0,t.jsx)(n.strong,{children:"inventory"})," scope."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{alt:"workbench-iq-ui",src:s(5429).Z+"",width:"3072",height:"1722"}),"\nThe UI has 3 panels:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.strong,{children:"Chat Panel"})]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.strong,{children:"Prompt Panel"})]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.strong,{children:"Side Panel"}),": This is common to Query Workbench and has already been discussed previously."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"the-prompt-panel",children:"The Prompt Panel"}),"\n",(0,t.jsxs)(n.p,{children:["You can enter your natural language prompt.",(0,t.jsx)("br",{}),"\nIn this example this prompt was entered:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"How can I select a list of 10 cities with most landmarks?\nAlso, arrange them in descending order.\n"})}),"\n",(0,t.jsx)(n.h3,{id:"prompt-toolbar",children:"Prompt ToolBar"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Run Button"}),": Button tom execute prompt. Note that pressing [ENTER] button does not automatically run the prompt."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Delete Button"}),": Clears Prompt Panel"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Send Schema Switch"}),": Send's the schema (same as that shown in ",(0,t.jsx)(n.em,{children:"Side Panel"}),") to AI"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"the-chat-panel",children:"The Chat Panel"}),"\n",(0,t.jsx)(n.p,{children:"This is Chat result sent back by iQ."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Thumbs"}),": Not available currently."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SQL Box"}),": Any SQL++ queries suggested by iQ"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Copy to Query"}),": Button to copy the SQL box contents to Query."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"chat-toolbar",children:"Chat ToolBar"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Statistics"}),": A few interesting stats."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Delete Button"}),": Clears the chat thread."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"chat-implementation",children:"Chat Implementation"}),"\n",(0,t.jsxs)(n.p,{children:["Let's discuss how this Chat is implemented.",(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["First, when sending your Prompt, choose to send schemas (on by default).","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"This helps Chat produce relevant results"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"The Chat Panel displays the results"}),"\n",(0,t.jsxs)(n.li,{children:["You can now have more Prompts to fine tune the results if required","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"This sends back the full thread back to iQ with the additional Prompt"}),"\n",(0,t.jsxs)(n.li,{children:["This means sending more ",(0,t.jsx)(n.strong,{children:"tokens"}),". Remember there is a limit of 4K tokens per Chat thread."]}),"\n",(0,t.jsx)(n.li,{children:"So, its a good idea to Clear the Chat thread for new prompts"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"excuting-the-query",children:"Excuting the Query"}),"\n",(0,t.jsxs)(n.p,{children:["Once you copy the Query, you can navigate to the Query Tab and execute the copied Query from there:\n",(0,t.jsx)(n.img,{alt:"workbench-iq-query",src:s(263).Z+"",width:"3072",height:"1720"}),"\nThis is the normal Query Workbench functionality as discussed previously."]}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsxs)(n.p,{children:["You can choose to ",(0,t.jsx)(n.strong,{children:"favorite"})," this query.",(0,t.jsx)("br",{}),"\nRemember to ",(0,t.jsx)(n.strong,{children:"format"})," the query first with the ",(0,t.jsx)(n.strong,{children:"favorite comments"})," style first."]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"This has been discussed previously in the documentation."}),"\n"]})]}),"\n",(0,t.jsx)(n.h2,{id:"interesting-queries",children:"Interesting Queries"}),"\n",(0,t.jsx)(n.p,{children:"Now, lets put iQ to work and have it generate a few intersting queries for us. For this, let's give it this Prompt:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Can you suggest about 6 interesting queries for the provided schema?\nTry not to make it simple queries.\nThrow in examples using UNNEST and JOINs.\n"})}),"\n",(0,t.jsx)(n.h3,{id:"iq-replies",children:"iQ Replies"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{alt:"workbench-iq-interesting",src:s(7487).Z+"",width:"1798",height:"1532"}),"\nYou can scroll and find all the 6 queries.",(0,t.jsx)("br",{}),"\nYou can copy any of the 6 queries to the Query Workbench using the Copy Button",(0,t.jsx)("br",{}),"\nWhen you come back to to the Ask iQ, the state is maintained, so you can copy and execute the queries as desired.",(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)(n.p,{children:["For the sake of completeness, these are the queries which iQ generated",(0,t.jsx)("br",{})]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Find all hotels that offer free breakfast, free internet, and free parking, and list the top 3 public likes for each hotel."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT h.name, h.address, h.city, h.state, ARRAY_AGG(pl) AS top_public_likes\nFROM hotel h\nUNNEST h.public_likes AS pl\nWHERE h.free_breakfast = TRUE AND h.free_internet = TRUE AND h.free_parking = TRUE\nGROUP BY h.name, h.address, h.city, h.state\nHAVING COUNT(pl) > 0\nLIMIT 3;\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Retrieve all airports in a specific country along with the airlines that operate from those airports."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT a.airportname, a.city, a.country, ARRAY_AGG(al.name) AS airlines_operating\nFROM airport a\nJOIN airline al ON a.country = al.country\nGROUP BY a.airportname, a.city, a.country;\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"List all landmarks in a city along with any hotels in the same city that have a vacancy."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT l.name AS landmark_name, l.address AS landmark_address, h.name AS hotel_name, h.address AS hotel_address\nFROM landmark l\nJOIN hotel h ON l.city = h.city\nWHERE h.vacancy = TRUE;\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:"Get a list of hotels with their average overall rating from reviews."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT h.name, h.address, AVG(r.ratings.Overall) AS average_rating\nFROM hotel h\nUNNEST h.reviews AS r\nGROUP BY h.name, h.address;\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"5",children:["\n",(0,t.jsx)(n.li,{children:"Find all routes from a specific airport, including the airline information and the schedule for each route."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'SELECT r.sourceairport, r.destinationairport, r.distance, al.name AS airline_name, s.schedule\nFROM route r\nJOIN airline al ON r.airlineid = al.id\nUNNEST r.schedule AS s\nWHERE r.sourceairport = "JFK";\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"6",children:["\n",(0,t.jsx)(n.li,{children:"Retrieve all hotels that have been reviewed by a specific author and list the details of those reviews."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:'SELECT h.name, h.address, r.*\nFROM hotel h\nUNNEST h.reviews AS r\nWHERE r.author = "John Doe";\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["Caution: Responses generated by iQ are not guranteed!",(0,t.jsx)("br",{}),"\nAlways run and check them!"]})})]})}function d(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},7487:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/images/workbench-iq-interesting-58b0b63b51b813047a47666f7c0ea398.png"},263:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/images/workbench-iq-query-cb728a475ab21a64ed9eba173eab96c3.png"},5429:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/images/workbench-iq-ui-66260e4d7538e25319bacc927d5966d8.png"},1151:(e,n,s)=>{s.d(n,{Z:()=>l,a:()=>a});var t=s(7294);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);