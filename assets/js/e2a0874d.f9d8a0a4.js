"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7715],{307:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>c});var l=i(5893),s=i(1151);const t={sidebar_position:4,title:"Local Link and Collections"},o="Standalone Collections and Data Import",a={id:"Databases-Columnar/Create-Local-Link",title:"Local Link and Collections",description:"Create a standalone Collection and Import Data into it",source:"@site/docs/Databases-Columnar/Create-Local-Link.md",sourceDirName:"Databases-Columnar",slug:"/Databases-Columnar/Create-Local-Link",permalink:"/docs/Databases-Columnar/Create-Local-Link",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"Local Link and Collections"},sidebar:"tutorialSidebar",previous:{title:"Links Manager",permalink:"/docs/Databases-Columnar/LinksManager"},next:{title:"Couchbase Link and Collections",permalink:"/docs/Databases-Columnar/Create-CB-Link"}},r={},c=[{value:"Step 1: Add Local Link Reference",id:"step-1-add-local-link-reference",level:3},{value:"Step 2: Add Collection",id:"step-2-add-collection",level:3},{value:"Import Data into Collection: Local File",id:"import-data-into-collection-local-file",level:2},{value:"File formats",id:"file-formats",level:3},{value:"Process",id:"process",level:3},{value:"Import Data into Collection: Local File",id:"import-data-into-collection-local-file-1",level:2},{value:"File formats",id:"file-formats-1",level:3},{value:"Process",id:"process-1",level:3},{value:"Uploading File to Amazon S3",id:"uploading-file-to-amazon-s3",level:3},{value:"Back to Import Process from Cloud",id:"back-to-import-process-from-cloud",level:3},{value:"Step 3: Get Schemas (optional, but nice)",id:"step-3-get-schemas-optional-but-nice",level:3}];function d(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"standalone-collections-and-data-import",children:"Standalone Collections and Data Import"}),"\n",(0,l.jsx)(n.p,{children:"Create a standalone Collection and Import Data into it"}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsxs)(n.p,{children:["Remember there is no ",(0,l.jsx)(n.em,{children:"Local Link"}),". ",(0,l.jsx)(n.strong,{children:"standalone"}),' collections are created directly on the Columnar Instance and are really not "linked" to anything. However, in DataStudio, to maintain a consistent UI Experience, standlaone collections are created in he built-in Local Link.']})}),"\n",(0,l.jsx)(n.h3,{id:"step-1-add-local-link-reference",children:"Step 1: Add Local Link Reference"}),"\n",(0,l.jsxs)(n.p,{children:["Click the ",(0,l.jsx)(n.strong,{children:"LinkRef"})," button in the Links Table ToolBar. This will bring up the list of choices:"]}),"\n",(0,l.jsx)("img",{src:"/img/columnar/link-add-local-reference.png",width:"400",alt:"link-add-local-reference"}),"\n",(0,l.jsx)(n.p,{children:"After adding the Link Reference, you will see the link."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Click on the Link Reference"}),"\n",(0,l.jsx)(n.li,{children:"This will enable to Add Collection button"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-2-add-collection",children:"Step 2: Add Collection"}),"\n",(0,l.jsx)("img",{src:"/img/columnar/dataset-local-movies.png",width:"600",alt:"dataset-local-movies"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Name the Collection"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["You need to provide the ",(0,l.jsx)(n.strong,{children:"Primary Key"})," for this Collection"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Option 1: Autogenerate"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The PK is autogenerated as a UUID string"}),"\n",(0,l.jsxs)(n.li,{children:["You can name the key instead of accepting the default ",(0,l.jsx)(n.em,{children:"columnar_id"})," of you want."]}),"\n",(0,l.jsx)(n.li,{children:"This is a good, safe option"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Option 1: Specify a comma delimited list of field names and types"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Example: `movie title`: string, `Rating`: bigint"}),"\n",(0,l.jsxs)(n.li,{children:["Do this only if you ",(0,l.jsx)(n.strong,{children:"sure"})," that each document in this collection have these fields."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Once satisfied, ",(0,l.jsx)(n.strong,{children:"Proceed"})," with Adding Collections."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"The info box shows you the DDL being run."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Dataset and Collection is synonymous."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"import-data-into-collection-local-file",children:"Import Data into Collection: Local File"}),"\n",(0,l.jsxs)(n.p,{children:["Now that the Collection has been created, you need to import data into the colection. Let's first consider importing data from a local file on your computer. This data is in a ",(0,l.jsx)(n.strong,{children:"single"})," file and it can be of 3 formats:"]}),"\n",(0,l.jsx)(n.h3,{id:"file-formats",children:"File formats"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"JSON Lines: The lines format specifies a file that contains one JSON document on every line in the file."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'{"key": "mykey1", "value": "myvalue1"}\n{"key": "mykey2", "value": "myvalue2"}\n{"key": "mykey3", "value": "myvalue3"}\n{"key": "mykey4", "value": "myvalue4"}\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"JSON List: The list format specifies a file which contains a JSON list where each element in the list is a JSON document. The file may only contain a single list, but the list may be specified over multiple lines."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:'[\n  {\n    "key": "mykey1",\n    "value": "myvalue1"\n  },\n  {"key": "mykey2", "value": "myvalue2"},\n  {"key": "mykey3", "value": "myvalue3"},\n  {"key": "mykey4", "value": "myvalue4"}\n]\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["CSV/TSV: Comma or Tab delimited format. File needs to have a ",(0,l.jsx)(n.strong,{children:"header"})," row specifying the field names. The field Types are automatically deduced from s sample row which is the 2nd row."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"VIN (1-10),County,City,State,Postal Code,Model Year,Make,Model,Electric Vehicle Type,Clean Alternative Fuel Vehicle (CAFV) Eligibility,Electric Range,Base MSRP,Legislative District,DOL Vehicle ID,Vehicle Location,Electric Utility,2020 Census Tract\n5YJSA1E22K,King,Seattle,WA,98112,2019,TESLA,MODEL S,Battery Electric Vehicle (BEV),Clean Alternative Fuel Vehicle Eligible,270,0,43,202233958,POINT (-122.300312 47.629782),CITY OF SEATTLE - (WA)|CITY OF TACOMA - (WA),53033006500\n"})}),"\n",(0,l.jsxs)(n.admonition,{type:"info",children:[(0,l.jsxs)(n.p,{children:["The file to be imported needs to have the proper ",(0,l.jsx)(n.strong,{children:"extension"}),"."]}),(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["JSON (list or lines) need to have a ",(0,l.jsx)(n.strong,{children:".json"})," extension"]}),"\n",(0,l.jsxs)(n.li,{children:["csv/tsv files need to have a ",(0,l.jsx)(n.strong,{children:".csv"})," or ",(0,l.jsx)(n.strong,{children:".tsv"})," extension"]}),"\n"]})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"process",children:"Process"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Click on the Local Link Reference"}),"\n",(0,l.jsxs)(n.li,{children:["This will enable the Import Icon on the Collections App Bar. There are 2 icons for import. One from Local file and the other from Cloud. We will discuss the former here.\n",(0,l.jsx)(n.img,{alt:"dataset-local-movies-import-1",src:i(6351).Z+"",width:"2678",height:"532"})]}),"\n",(0,l.jsxs)(n.li,{children:["This will pop up a dialog box for Import.\n",(0,l.jsx)(n.img,{alt:"dataset-local-movies-import-2",src:i(3702).Z+"",width:"1798",height:"1516"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The Collection Name and Primary Key specified when creating the Collection are displayed as a FYI. These are not editable."}),"\n",(0,l.jsxs)(n.li,{children:["The ",(0,l.jsx)(n.strong,{children:"Select File"})," button will pop up a file selector. Choose your file."]}),"\n",(0,l.jsxs)(n.li,{children:["The Right side Panel will show a sample document and the number of documents in the file. This is available only for ",(0,l.jsx)(n.strong,{children:"JSON Lines"})," and ",(0,l.jsx)(n.strong,{children:"CSV/TSV"})," files.","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Note: Currently, onn Windows, the number of documents shows 1 extra. The import, however, will import the actual number of documents."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["You have a few Import Options:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"Skip"}),": Nuumber of documents to be skipped before import starts."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"Maximum Documents"}),": Number of documents to be imported. Specify 0 (default) for all."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"Exclude Fields"}),": Fields to be exluded when importing. This is a selector and you can choose the fields to be excluded. Notice the sample document reflect this selection."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Click ",(0,l.jsx)(n.strong,{children:"Proceed"})," button","\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Documents are ",(0,l.jsx)(n.em,{children:"upserted"})," in batches"]}),"\n",(0,l.jsx)(n.li,{children:"There is no file size limit, but this takes time"}),"\n",(0,l.jsx)(n.li,{children:"For larger files, import from Cloud is recommended"}),"\n"]})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"import-data-into-collection-local-file-1",children:"Import Data into Collection: Local File"}),"\n",(0,l.jsx)(n.h3,{id:"file-formats-1",children:"File formats"}),"\n",(0,l.jsx)(n.p,{children:"File formats and requirements are same as above"}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Import from Cloud, imports ALL files in the Amazon Folder"}),"\n",(0,l.jsxs)(n.li,{children:["The process actually implements the ",(0,l.jsx)(n.strong,{children:"COPY INTO"})," function, and this can be done from the ",(0,l.jsx)(n.em,{children:"Query Workbench"})," too."]}),"\n"]})}),"\n",(0,l.jsx)(n.h3,{id:"process-1",children:"Process"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Click on the Local Link Reference"}),"\n",(0,l.jsx)(n.li,{children:"This will enable the Import Icon on the Collections App Bar. There are 2 icons for import. One from Local file and the other from Cloud. We will discuss the latter here."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"uploading-file-to-amazon-s3",children:"Uploading File to Amazon S3"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["You can use Capella DataStudio to upload the file to your Amazon S3 Bucket","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Navigate to Stores from the Navigation Panel"}),"\n",(0,l.jsx)(n.li,{children:"Choose the Cloud Store"}),"\n",(0,l.jsxs)(n.li,{children:["Click the ",(0,l.jsx)(n.strong,{children:"S3 File Manager"})," to open it."]}),"\n",(0,l.jsx)(n.li,{children:"In the S3 File Manager, create a folder is necessary and choose it"}),"\n",(0,l.jsx)(n.li,{children:"On the ToolBar in Right Panel, click the Upload to Cloud Icon"}),"\n",(0,l.jsxs)(n.li,{children:["This opens the Local File Browser. Select the file you want to upload\n",(0,l.jsx)(n.img,{alt:"upload-evdata",src:i(8875).Z+"",width:"2068",height:"1190"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Upload Progress"})," is shown and will disppear after its done.\n",(0,l.jsx)(n.img,{alt:"upload-evdata-after",src:i(3404).Z+"",width:"1800",height:"294"}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsx)(n.p,{children:"You may have to Navigate away to to the folder."})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"back-to-import-process-from-cloud",children:"Back to Import Process from Cloud"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Click the Import from the Cloud Icon\n",(0,l.jsx)(n.img,{alt:"dataset-local-evdata-import-1",src:i(9482).Z+"",width:"2672",height:"536"})]}),"\n",(0,l.jsxs)(n.li,{children:["This brings up the Import Dialog Box\n",(0,l.jsx)(n.img,{alt:"dataset-local-evdata-import-2",src:i(2054).Z+"",width:"1800",height:"1024"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Left Panel"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"Select"})," the Store (if you have more than one)"]}),"\n",(0,l.jsx)(n.li,{children:"In the Files folder, choose the Folder where the data file is"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Right Panel"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Choose the ",(0,l.jsx)(n.em,{children:"File Type"}),". In our example, this is a CSV file."]}),"\n",(0,l.jsx)(n.li,{children:"The Colection Name and the Primary Key is displayed in a Read-Only box as a FYI."}),"\n",(0,l.jsxs)(n.li,{children:["You have some Import Options","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"File Filter"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"None"})," : Default. No Filters"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Include Files"}),": Wildcard filter."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Exclude Files"}),": Wildcard filter."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Headers"}),": First row of File is the header with Field Names"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Nulls As"}),":","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"Empty String"}),": Fields with nulls are replaced as empty strings"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"Custom String"}),": Any string"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Sample csv/tsv File"}),": Select a sample file (if you have more than one) in the Folder."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Schema Expression"}),": Describe the schema of the file.","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Field Name, Field Type ",(0,l.jsx)(n.em,{children:"not unknown"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.em,{children:"not unknown"})," is optional. This means that if the field is not there in the document, that document will be skipped and not imported."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Schema Expn Help"}),": Button to make above task easier. Clieck this as the Expression is generated for you based on the ",(0,l.jsx)(n.strong,{children:"Sample"})," file.","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["You can edit the generated schema to you requirement. For example, remove ",(0,l.jsx)(n.em,{children:"not unknowm"})," or the Type (string/bigint/double/boolean) suggested"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Click the ",(0,l.jsx)(n.strong,{children:"Proceed"})," button\n",(0,l.jsx)(n.img,{alt:"dataset-local-evdata-import-3",src:i(644).Z+"",width:"1806",height:"200"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-3-get-schemas-optional-but-nice",children:"Step 3: Get Schemas (optional, but nice)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Click the ",(0,l.jsx)(n.strong,{children:"Get Schemas"})," button. It:","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Fetches the ",(0,l.jsx)(n.strong,{children:"item count"})]}),"\n",(0,l.jsxs)(n.li,{children:["Fetches one ",(0,l.jsx)(n.strong,{children:"sample document"})," and attaches it to the Collection"]}),"\n",(0,l.jsxs)(n.li,{children:["Fetches the ",(0,l.jsx)(n.strong,{children:"schema"})," for that Collection and attaches it to the Collection",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsx)(n.p,{children:"This is an expensive operation and need to be performed just once."})}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},9482:(e,n,i)=>{i.d(n,{Z:()=>l});const l=i.p+"assets/images/dataset-local-evdata-import-1-9f174ded8d0fab4eb03303ea5fcc2c69.png"},2054:(e,n,i)=>{i.d(n,{Z:()=>l});const l=i.p+"assets/images/dataset-local-evdata-import-2-994602de4b8c944b70ab06626ce51ae8.png"},644:(e,n,i)=>{i.d(n,{Z:()=>l});const l=i.p+"assets/images/dataset-local-evdata-import-3-4682fde319813539a8a8ae0b6b3adcb9.png"},6351:(e,n,i)=>{i.d(n,{Z:()=>l});const l=i.p+"assets/images/dataset-local-movies-import-1-b185addbee466c0601bf70e0f32bd0b4.png"},3702:(e,n,i)=>{i.d(n,{Z:()=>l});const l=i.p+"assets/images/dataset-local-movies-import-2-2ce7ff2eacffbc13b7980c86f54fcc90.png"},3404:(e,n,i)=>{i.d(n,{Z:()=>l});const l=i.p+"assets/images/upload-evdata-after-71b60b6b7d8dc0e8545ddca112c305fb.png"},8875:(e,n,i)=>{i.d(n,{Z:()=>l});const l=i.p+"assets/images/upload-evdata-8b6e7efc017bb75abb9e31d980f553ee.png"},1151:(e,n,i)=>{i.d(n,{Z:()=>a,a:()=>o});var l=i(7294);const s={},t=l.createContext(s);function o(e){const n=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),l.createElement(t.Provider,{value:n},e.children)}}}]);